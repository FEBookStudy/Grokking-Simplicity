# 1. 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다.

## 함수형 프로그래밍은 무엇인가요?

- 부수 효과(Side Effect): 함수가 리턴값 반환 이외에 하는 모든 일
- 순수 함수: 부수 효과가 없이 결과가 인자에만 의존하는 함수 = 수학 함수

- 함수형 프로그래밍(Functional Programming)

  1. **수학 함수**를 사용하고 **부수 효과**를 피하는 것이 특징인 프로그래밍 패러다임
  2. **부수 효과** 없이 **순수 함수**만 사용하는 프로그래밍 스타일

> [!WARNING]
> 부수 효과는 필요하다.  
> 함수형 프로그래머는 순수하지 않은 함수도 사용한다.  
> 그리고 순수하지 않은 함수를 잘 다룰 수 있는 기술이 많이 있다.

## 함수형 사고가 무엇인가요?

1. 액션과 계산, 데이터를 구분해서 생각하기
   - 코드를 구분하기
   - 액션을 계산으로 리팩터링하기
2. 일급 추상
   - 함수에 함수를 넘겨 더 많은 함수 재사용하기

# 2. 현실에서의 함수형 사고

## 파트 Ⅰ: 액션과 계산, 데이터

- 액션(Action): 호출 횟수와 시점에 의존
- 계산(Calculation): 어떤 것을 결정하거나 계획하는 것
  - 실행해도 다른 곳에 영향을 주지 않는다.
  - 같은 입력값으로 계산하면 항상 같은 결괏값이 나온다.
- 데이터(Data): 변경 불가능한 데이터
  - 데이터 자체로 의미가 있다.
  - 여러 형태로 해석할 수 있다.

## 계층형 설계

- 테스트, 재사용, 유지보수가 쉽다.
- 코드의 변경 가능성에 따른 구분
  - 비즈니스 규칙
  - 도메인 규칙
  - 기술 스택

## 파트 Ⅱ: 일급 추상

- 분산 시스템
  - 순차적인 프로그램을 분산 시스템으로 바꾸는 것은 어렵다.
  - 올바른 순서로 동작하는 프로그램을 만드려면 액션(시간에 의존적인)에 집중할 필요가 있다.
  - 여러 타임라인이 동시에 진행될 때 서로 순서를 맞추는 방법 → 고차 함수로 구현
    - 타임라인 커팅: 각 타임라인은 독립적으로 동작하고 작업이 완료되면 다른 타임라인이 끝나기를 기다린다.

# 3. 액션과 계산, 데이터의 차이를 알기

## 액션과 계산, 데이터

### 액션

> 부수 효과, 부수 효과가 있는 함수, 순수하지 않은 함수

- 함수로 액션을 구현
- 외부 세상에 영향을 줄 수 있다.

- 액션은 코드 전체로 퍼진다.

  - 액션을 호출하는 함수가 있다면, 그 함수도 액션이 된다.

- 액션을 잘 사용하기 위한 방법
  1. 가능한 액션을 적게 사용한다.
     - 액션 대신 계산을 사용할 수 있는지 고민하기
  2. 액션은 가능한 작게 만든다.
     - 액션에서 액션과 관련 없는 코드는 모두 제거하기
  3. 액션이 외부 세계와 상호작용하는 것을 제한한다.
     - 내부에 계산과 데이터만 있고, 가장 바깥쪽에 액션이 있는 구조
     - 어니언 아키텍처
  4. 액션이 호출 시점에 의존하는 것을 제한한다.
     - 액션이 호출 시점과 횟수에 덜 의존하도록 만드는 기술

&nbsp;

---

_2. 부르는 횟수나 시점이 중요한가?_

---

&nbsp;

### 계산

> 순수 함수, 수학 함수

- 함수로 계산을 구현
- 연산으로 의미 부여

- 계산이 액션보다 좋은 점

  1. 테스트하기 쉽다.
  2. 기계적인 분석이 쉽다.
  3. 조합하기 좋다.

- 계산을 사용하면서 걱정하지 않아도 될 것

  1. 동시에 실행되는 것
  2. 과거에 실행되었던 것이나 미래에 실행할 것
  3. 실행 횟수

- 함수는 블랙박스다.
  - 실행하기 전에는 어떤 일이 발생할지 알 수 없다.

&nbsp;

---

_1. 실행이 가능한가?_

---

&nbsp;

### 데이터

> 이벤트에 대한 사실

- 기본 자료형으로 데이터를 구현
- 자료 구조로 의미 부여

- 불변 데이터 구조를 위한 두 가지 원칙

  1. 카피 온 라이트(Copy on write): 변경할 때 복사본을 만든다.
  2. 방어적 복사(Defensive copy): 보관하려고 하는 데이터의 복사본을 만든다.

- 장점

  - 데이터 자체로는 할 수 있는 것이 없다.
    - 데이터를 데이터 그대로 이해할 수 있다.

  1. 직렬화
  2. 동일성 비교
  3. 자유로운 해석

- 단점
  - 해석이 반드시 필요
