## Chapter 14. 중첩된 데이터에 함수형 도구 사용하기

- 해시 맵에 저장된 값을 다루기 위한 고차 함수를 만들어보자.

```javascript
function update(object, key, modify) {
  var value = object[key];
  var newValue = modify(value);
  var newObject = objectSet(object, key, newValue);
  return newObject;
}

function objectSet(object, key, value) {
  return withObjectCopy(object, function (copy) {
    copy[key] = value;
  });
}

function withObjectCopy(object, modify) {
  var copy = Object.assign({}, object);
  modify(copy);
  return copy;
}
```

```javascript
function update2(object, key1, key2, modify) {
  return update(object, key1, function (value) {
    return update(value, key2, modify);
  });
}

function update3(object, key1, key2, key3, modify) {
  return update(object, key1, function (object2) {
    return update(object2, key2, key3, modify);
  });
}
```

```javascript
function nestedUpdate(object, keys, modify) {
  if (keys.length === 0) return modify(object);
  var key1 = keys[0];
  var restOfKeys = drop_first(keys);
  return update(object, key1, function (value1) {
    return nestedUpdate(value1, restOfKeys, modify);
  });
}
```

```javascript
const drop_first = (arr) => arr.slice(1);
```

### 깊이 중첩된 데이터에 추상화 벽 사용하기

깊이 중첩된 데이터를 사용할 때 너무 많은 것을 기억해야 하는 어려움을 없애보자.

```javascript
function updatePostById(category, id, modifyPost) {
  return nestedUpdate(category, ["posts", "id"], modifyPost);
}
```

```javascript
function updateAuthor(post, modifyUser) {
  return update(post, "author", modifyUser);
}
```

```javascript
function capitalizeName(user) {
  return update(user, "name", capitalize);
}
```

```javascript
function updatePostById(blogCategory, '12', function(post) {
	return updateAuthor(post, capitalizeName);
})
```

## Chapter 15. 타임라인 격리하기

- 시간에 따라 실행되는 액션의 순서를 나타내기 위한 타임라인 다이어그램을 알아보자.

타임라인 다이어그램은 소프트웨어가 어떻게 동작하는지 이해하는 데 도움이 된다.
특히 웹 서버와 클라이언트 간 통신처럼 분산 시스템을 이해하기 좋다.
